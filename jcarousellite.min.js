/*! jQuery jCarousel Lite - v1.8.1 - 2013-02-07
* http://kswedberg.github.com/jquery-carousel-lite/
* Copyright (c) 2013 Karl Swedberg; Licensed MIT  */

(function(e){function t(e,t){return t.autoStop&&(t.circular?t.autoStop:Math.min(e,t.autoStop))}function i(e){this.id&&(this.id+=e)}e.jCarouselLite={version:"@VERSION",curr:0},e.fn.jCarouselLite=function(a){var s=e.extend(!0,{},e.fn.jCarouselLite.defaults,a),n=Math.ceil,l=Math.abs;return this.each(function(){function a(){return W.slice(X).slice(0,y)}function o(t,i){if(C)return!1;i=i||{};var n=X,l=t>X,o=i.speed||s.speed,r=i.offset||0;return s.beforeStart&&s.beforeStart.call(S,a(),l),W.removeClass(s.activeClass),s.circular?(t>X&&t>F-y?(X%=T,t-=T,x.css(g,-X*b.liSize-r)):X>t&&0>t&&(X+=T,t+=T,x.css(g,-X*b.liSize-r)),X=t+t%1):(0>t?t=0:t>F-P&&(t=F-P),X=t,0===X&&s.first&&s.first.call(this,a(),l),X===F-P&&s.last&&s.last.call(this,a(),l),s.btnPrev&&s.$btnPrev.toggleClass(s.btnDisabledClass,0===X),s.btnNext&&s.$btnNext.toggleClass(s.btnDisabledClass,X===F-P)),I(X,E),e.jCarouselLite.curr=X,n!==X||i.force?(C=!0,j[g]=-(X*b.liSize),x.animate(j,o,s.easing,function(){s.afterEnd&&s.afterEnd.call(S,a(),l),C=!1}),W.eq(X).addClass(s.activeClass),X):(s.afterEnd&&s.afterEnd.call(S,a(),l),X)}var r,c,u,d,v,f,h,b={div:{},ul:{},li:{}},p=!0,C=!1,g=s.vertical?"top":"left",j={},m=s.vertical?"height":"width",A=this,S=e(this),x=S.find("ul").eq(0),w=x.children("li"),T=w.length,D=s.visible,y=n(D),P=Math.floor(D),z=Math.min(s.start,T-1),N=1,$=0,E={},L={},G={},M=s.vertical?"y":"x",q=s.vertical?"x":"y",k=s.init.call(this,s,w);if(k!==!1){S.data("dirjc",N),S.data(g+"jc",S.css(g)),s.circular&&(r=w.slice(T-y).clone(!0).each(i),c=w.slice(0,y).clone(!0).each(i),x.prepend(r).append(c),z+=y,$=y);var I=function(t,i){t=n(t);var a,l=(t-$)%T,o=l+P;return i.go&&(a=e(s.btnGo),a.removeClass(s.activeClass).removeClass(s.visibleClass),a.eq(l).addClass(s.activeClass),a.slice(l,l+P).addClass(s.visibleClass),o>a.length&&a.slice(0,o-a.length).addClass(s.visibleClass)),i.pager&&(u.removeClass(s.activeClass),u.eq(n(l/D)).addClass(s.activeClass)),l},W=x.children("li"),F=W.length,X=z;e.jCarouselLite.curr=X;var Y=function(e){var t,i,a;return e?(b.div[m]="",b.li={width:"",height:""},b):(t=s.vertical?W.outerHeight(!0):W.outerWidth(!0),i=t*F,a=t*D,b.div[m]=a+"px",b.ul[m]=i+"px",b.ul[g]=-(X*t)+"px",b.li={width:W.width(),height:W.height()},b.liSize=t,b)},H=function(t){var i,a={div:{visibility:"visible",position:"relative",zIndex:2,left:"0"},ul:{margin:"0",padding:"0",position:"relative",listStyleType:"none",zIndex:1},li:{overflow:s.vertical?"hidden":"visible","float":s.vertical?"none":"left"}};t&&(i=Y(!0),S.css(i.div),x.css(i.ul),W.css(i.li)),i=Y(),s.autoCSS&&(p&&(e.extend(!0,i,a),p=!1),W.css(i.li),x.css(i.ul),S.css(i.div))};H();var O=0,Q=t(T,s),R="number"==typeof s.auto?s.auto:s.scroll,V=function(){A.setAutoAdvance=setTimeout(function(){(!Q||Q>O)&&(N=S.data("dirjc"),o(X+N*R),O++,V())},s.timeout)};if(e.each(["btnPrev","btnNext"],function(t,i){s[i]&&(s["$"+i]=e.isFunction(s[i])?s[i].call(S[0]):e(s[i]),s["$"+i].bind("click.jc",function(e){e.preventDefault();var i=0===t?X-s.scroll:X+s.scroll;return s.directional&&S.data("dirjc",t?1:-1),o(i)}))}),s.circular||(s.btnPrev&&0===z&&s.$btnPrev.addClass(s.btnDisabledClass),s.btnNext&&z+P>=F&&s.$btnNext.addClass(s.btnDisabledClass)),s.btnGo&&(e.each(s.btnGo,function(t,i){e(i).bind("click.jc",function(e){return e.preventDefault(),o(s.circular?D+t:t)})}),E.go=1),s.autoPager){d=n(T/D),u=[];for(var B=0;d>B;B++)u.push('<li><a href="#">'+(B+1)+"</a></li>");u.length>1&&(u=e("<ul>"+u.join("")+"</ul>").appendTo(s.autoPager).find("li")),u.find("a").each(function(t){e(this).bind("click.jc",function(e){e.preventDefault();var i=t*D;return s.circular&&(i+=D),o(i)})}),E.pager=1}I(z,E),s.mouseWheel&&S.mousewheel&&S.bind("mousewheel.jc",function(e,t){return t>0?o(X-s.scroll):o(X+s.scroll)}),s.pause&&s.auto&&S.bind("mouseenter.jc",function(){S.trigger("pauseCarousel.jc")}).bind("mouseleave.jc",function(){S.trigger("resumeCarousel.jc")}),s.auto&&V(),e.jCarouselLite.vis=a,S.bind("go.jc",function(e,t,i){t===void 0&&(t="+=1");var a="string"==typeof t&&/(\+=|-=)(\d+)/.exec(t);a?t="-="==a[1]?X-1*a[2]:X+1*a[2]:t+=z,o(t,i)}).bind("startCarousel.jc",function(){clearTimeout(A.setAutoAdvance),A.setAutoAdvance=void 0,S.trigger("go","+="+s.scroll),V(),S.removeData("pausedjc").removeData("stoppedjc")}).bind("resumeCarousel.jc",function(e,t){if(!A.setAutoAdvance){clearTimeout(A.setAutoAdvance),A.setAutoAdvance=void 0;var i=S.data("stoppedjc");(t||!i)&&(V(),S.removeData("pausedjc"),i&&S.removeData("stoppedjc"))}}).bind("pauseCarousel.jc",function(){clearTimeout(A.setAutoAdvance),A.setAutoAdvance=void 0,S.data("pausedjc",!0)}).bind("stopCarousel.jc",function(){clearTimeout(A.setAutoAdvance),A.setAutoAdvance=void 0,S.data("stoppedjc",!0)}).bind("refreshCarousel.jc",function(){H(s.autoCSS)}).bind("endCarousel.jc",function(){A.setAutoAdvance&&(clearTimeout(A.setAutoAdvance),A.setAutoAdvance=void 0),s.btnPrev&&s.$btnPrev.addClass(s.btnDisabledClass).unbind(".jc"),s.btnNext&&s.$btnNext.addClass(s.btnDisabledClass).unbind(".jc"),s.btnGo&&e.each(s.btnGo,function(t,i){e(i).unbind(".jc")}),s.circular&&(W.slice(0,y).remove(),W.slice(-y).remove()),e.each([g+"jc","pausedjc","stoppedjc","dirjc"],function(e,t){S.removeData(t)}),S.unbind(".jc")}),h={touchstart:function(e){L.x=e.targetTouches[0].pageX,L.y=e.targetTouches[0].pageY,L[g]=parseFloat(x.css(g)),L.time=+new Date},touchmove:function(e){var t=e.targetTouches.length;1===t?(e.preventDefault(),G.x=e.targetTouches[0].pageX,G.y=e.targetTouches[0].pageY,j[g]=L[g]+(G[M]-L[M]),x.css(j)):G=L},touchend:function(){if(G.x){var e=L[M]-G[M],t=l(e),i=t>s.swipeThresholds[M],a=l(L[q]-G[q])<s.swipeThresholds[q],n=+new Date-L.time,o=s.swipeThresholds.time>n,r=e>0?"+=":"-=",c=r+s.scroll,u={force:!0};o&&i&&a?u.speed=s.speed/2:!o&&b.liSize/2>t||!i||o&&!a?c="+=0":!o&&t>b.liSize/2&&(c=Math.round(t/b.liSize),c=r+(c>s.visible?s.visible:c),u.offset=e),S.trigger("go.jc",[c,u]),G={}}}},"ontouchend"in document&&s.swipe&&S.bind("touchstart touchmove touchend",function(e){e=e.originalEvent,h[e.type](e)}),s.responsive&&(f=s.autoCSS,e(window).bind("resize",function(){f&&(x.width(2*x.width()),f=!1),clearTimeout(v),v=setTimeout(function(){S.trigger("refreshCarousel"),f=s.autoCSS},100)}))}}),this},e.fn.jCarouselLite.defaults={autoCSS:!0,btnPrev:null,btnNext:null,btnGo:null,autoPager:null,btnDisabledClass:"disabled",activeClass:"active",visibleClass:"vis",mouseWheel:!1,speed:200,easing:null,timeout:4e3,auto:!1,directional:!1,autoStop:!1,pause:!0,vertical:!1,circular:!0,visible:3,start:0,scroll:1,responsive:!1,swipe:!0,swipeThresholds:{x:80,y:120,time:150},init:function(){},first:null,last:null,beforeStart:null,afterEnd:null}})(jQuery);